
/*410448547*/
document.addEventListener("DOMContentLoaded",function(){g_$$(".accordion-header.acc-head").forEach(elem=>{elem.addEventListener('click',function(event){const selected=event.currentTarget.classList.contains('bg-primary');g_$$('.accordion-header.acc-head').forEach(acc=>{acc.classList.remove('bg-primary');acc.querySelector('button > .acc-title').classList.remove('text-white');acc.querySelector('button > .acc-img.open').classList.add('show');acc.querySelector('button > .acc-img.close').classList.remove('show')});if(!selected){event.currentTarget.classList.add('bg-primary');event.currentTarget.querySelector('button > .acc-title').classList.add('text-white');event.currentTarget.querySelectorAll('button > .acc-img').forEach(img=>{img.classList.toggle('show')})}})})})
/*410448547*/
/*326420367*/
document.addEventListener("DOMContentLoaded",function(){g_$$(".accordion-header.acc-head").forEach(elem=>{elem.addEventListener('click',function(event){const selected=event.currentTarget.classList.contains('bg-primary');g_$$('.accordion-header.acc-head').forEach(acc=>{acc.classList.remove('bg-primary');acc.querySelector('button > .acc-title').classList.remove('text-white');acc.querySelector('button > .acc-img.open').classList.add('show');acc.querySelector('button > .acc-img.close').classList.remove('show')});if(!selected){event.currentTarget.classList.add('bg-primary');event.currentTarget.querySelector('button > .acc-title').classList.add('text-white');event.currentTarget.querySelectorAll('button > .acc-img').forEach(img=>{img.classList.toggle('show')})}})})})
/*326420367*/
/*850342582*/
document.addEventListener("DOMContentLoaded",function(){g_$$(".accordion-header.acc-head").forEach(elem=>{elem.addEventListener('click',function(event){const selected=event.currentTarget.classList.contains('bg-primary');g_$$('.accordion-header.acc-head').forEach(acc=>{acc.classList.remove('bg-primary');acc.querySelector('button > .acc-title').classList.remove('text-white');acc.querySelector('button > .acc-img.open').classList.add('show');acc.querySelector('button > .acc-img.close').classList.remove('show')});if(!selected){event.currentTarget.classList.add('bg-primary');event.currentTarget.querySelector('button > .acc-title').classList.add('text-white');event.currentTarget.querySelectorAll('button > .acc-img').forEach(img=>{img.classList.toggle('show')})}})})})
/*850342582*/
/*3470332547*/
document.addEventListener("DOMContentLoaded",async function(){let timeout;let currentPage=1;let total=0;const hostname=g_$('#hostname')?.value;if(g_$('#notificationBill')){g_$('#notificationBill').addEventListener('mouseenter',function(){showDropdown()});g_$('#notificationBill').addEventListener('mouseleave',function(){timeout=setTimeout(hideDropdown(),500)});g_$('#notificationDropdown').addEventListener('mouseenter',function(){clearTimeout(timeout);showDropdown()});g_$('#notificationDropdown').addEventListener('mouseleave',function(){hideDropdown()});g_$('#notificationBill').addEventListener('keyup',function(event){if(event.keyCode===13||event.key=='Enter'){showDropdown()}if(event.keyCode==27||event.key=='Esc'||event.key=='Escape'){hideDropdown()}});g_$('#clearAllBtn').addEventListener('click',(event)=>{event.preventDefault();markAllAsClosed()});g_$('#notificationDropdown')?.addEventListener('scroll',()=>{const{scrollTop,scrollHeight,clientHeight}=g_$('#notificationDropdown');if(scrollTop+clientHeight>=scrollHeight-5&&hasMoreNotification(currentPage,total)){currentPage++;loadNotifications(currentPage)}},{passive:true});function showDropdown(){const notificationDropdown=new bootstrap.Dropdown(g_$('#notificationBill'));notificationDropdown.show()}function hideDropdown(){const notificationDropdown=new bootstrap.Dropdown(g_$('#notificationBill'));notificationDropdown.hide();g_$('#notificationBill').removeAttribute('aria-expanded')}async function updateNotificationCount(){const notificationsCount=await fetchNotificationsCount();if(notificationsCount>0){g_$('#notificationsCount').classList.remove('d-none');g_$('#notificationsCount').innerHTML=`
                    ${notificationsCount}
                    <span class="visually-hidden">unread messages</span>
                `}else{g_$('#notificationsCount').classList.add('d-none')}}async function loadNotifications(page){showLoader();setTimeout(async()=>{try{if(hasMoreNotification(page,total)){const data=await fetchNotifications(page);showNotifications(data?.notifications);total=data?.total}}catch(error){}finally{hideLoader()}},500)}function hideLoader(){g_$('#loader').classList.remove('show');g_$('#loader').classList.add('hide')}function showLoader(){g_$('#loader').classList.remove('hide');g_$('#loader').classList.add('show')}function hasMoreNotification(page,total){const limit=10;const startIndex=(page-1)*limit+1;return(total===0)||(startIndex<total)};function performNotificationAction(event,notification){if(event.target.id=='closeNotification'){markNotificationAsClosed(notification._id)}else{if(notification.status==='Pending'){markNotificationAsSeen(notification._id)}}}function showNotificationItem(notification){const notificationItem=document.createElement('div');notificationItem.classList.add('notification-item','rounded','p-3','m-3');notificationItem.setAttribute('tabindex','0');if(notification.status==='Pending'){notificationItem.classList.add('active')}notificationItem.addEventListener('click',(event)=>{performNotificationAction(event,notification)});notificationItem.addEventListener('keyup',function(event){if(event.keyCode===13||event.key=='Enter'){performNotificationAction(event,notification)}});const dateFromNow=getDateFromNow(notification.createdAt);notificationItem.innerHTML=`
                <div class="d-flex">
                    <div class="notification-item-title w-100">${notification.title}</div>
                    <div class="notification-item-icon flex-shrink-1"><i class="bi bi-x" id="closeNotification" aria-hidden="true" tabindex="0"></i></div>
                </div>
                <div>${notification.message}</div>
                <div id="notifDate" style="color:var(--secondary-middle-grey); font-size: 14px;">
                    ${dateFromNow}
                </div>
            `;g_$('#notificationsList').appendChild(notificationItem)}function showNotifications(notifications){notifications.forEach((notification)=>showNotificationItem(notification))}function redirectToForm(notification){const form=notification?.payload?.form;const xref=notification?.payload?.xref;if(form){const process=notification.record.process;const formUrl=`/user/service/${process._id}/form/${form}/${xref}`;window.location.href=formUrl}}function generatePassword(){var length=8,charset="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",retVal="";for(var i=0,n=charset.length;i<length;++i){retVal+=charset.charAt(Math.floor(Math.random()*n))}return retVal}async function fetchNotifications(page=1,limit=0){let randomStr=generatePassword();let url=`/user/notifications/${randomStr}?page=${page}`+(limit>0?`&limit=${limit}`:'');let res=await fetch(url);if(res.status===200){let data=await res.json();return data?.data}return null}async function fetchNotificationsCount(){let randomStr=generatePassword();let res=await fetch(`/user/notifications/count/${randomStr}`);if(res.status===200){let data=await res.json();return data?.data?.count}return 0}async function markNotificationAsSeen(id){await updateNotification(id,{status:'Seen'});updateNotificationCount();refreshNotifications()}async function markNotificationAsClosed(id){await updateNotification(id,{status:'Closed'});updateNotificationCount();refreshNotifications()}async function updateNotification(id,body){let res=await fetch(`/user/notifications/${id}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)})}async function markAllAsClosed(){let res=await fetch(`/user/notifications/clearAll`);if(res.status===200){updateNotificationCount();refreshNotifications();return true}return false}function refreshNotifications(){setTimeout(async()=>{try{const data=await fetchNotifications(1,currentPage*10);if(data){clearNotificationsList();showNotifications(data?.notifications)}}catch(error){}},500)}function clearNotificationsList(){g_$('#notificationsList').innerHTML=''}getDateFromNow=function(date){moment.locale('fr',{relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},});return moment(date).fromNow()};updateNotificationCount();setInterval(()=>{updateNotificationCount();refreshNotifications()},1*60*1000);loadNotifications(currentPage)}});
/*3470332547*/
/*901924565*/
document.addEventListener("DOMContentLoaded",function(){g_$$("input[type=password]").forEach(elem=>{elem.addEventListener('keyup',function(event){const complexity=[{name:'numericCheck',rule:new RegExp('[0-9]')},{name:'lwrCheck',rule:new RegExp('[a-z]')},{name:'uprCheck',rule:new RegExp('[A-Z]')},{name:'minCheck',rule:new RegExp(/^\S{8,100}$/)}];const formDiv=event.target.parentElement;complexity.forEach((c)=>{const icon=formDiv.querySelector('.'+c.name);if(c.rule.test(event.target.value)){icon?.classList.replace('bi-x','bi-check');icon?.classList.replace('text-danger','text-green-color')}else{icon?.classList.replace('bi-check','bi-x');icon?.classList.replace('text-green-color','text-danger')}})})});g_$$('.password-icon').forEach(elem=>{elem.addEventListener('click',function(event){const password=event.currentTarget.parentElement.querySelector('input');const icon=event.currentTarget.querySelector('i');if(password.getAttribute('type')==='password'){password.setAttribute('type','text');icon?.classList.replace('bi-eye-slash-fill','bi-eye-fill')}else{password.setAttribute('type','password');icon?.classList.replace('bi-eye-fill','bi-eye-slash-fill')}})})});
/*901924565*/
/*3976366670*/
document.addEventListener("DOMContentLoaded",function(){var myDropdown=document.querySelector('.myDropdown');if(myDropdown){myDropdown.addEventListener('show.bs.dropdown',function(){document.querySelector('.btn-dropdown').classList.add('btn-border');document.querySelector('.icon').classList.add('d-none');document.querySelector('.icon-up').classList.remove('d-none')});myDropdown.addEventListener('hidden.bs.dropdown',function(){document.querySelector('.btn-dropdown')?.classList.remove('btn-border');document.querySelector('.icon').classList.remove('d-none');document.querySelector('.icon-up').classList.add('d-none')})}})
/*3976366670*/
/*3838586448*/
document.addEventListener("DOMContentLoaded",function(){var popoverTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));var popoverList=popoverTriggerList.map(function(popoverTriggerEl){return new bootstrap.Popover(popoverTriggerEl)})})
/*3838586448*/
/*2658980654*/
document.addEventListener("DOMContentLoaded",function(){g_$$("input[type=radio]").forEach(elem=>{elem.addEventListener('change',function(event){const parentElm=event.target.parentElement.parentElement;const name=event.target.getAttribute("name");g_$$(`input[name=${name}]`).forEach(elem=>elem.parentElement.parentElement.classList.replace('bg-light-green','gray-border'));if(this.checked){parentElm.classList.replace('gray-border','bg-light-green')}})})});
/*2658980654*/
/*3190871170*/
document.addEventListener("DOMContentLoaded",function(){const redsUrls=document.querySelectorAll('input[name="redirectUrl"]');console.log(redsUrls);redsUrls.forEach(function(el){console.log(el);el.setAttribute("value",window.location.pathname)})});
/*3190871170*/